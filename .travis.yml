language: java

sudo: required
dist: trusty

matrix:
  include:
    - jdk: oraclejdk11
      env: TNT_REPO="2.0"
    - jdk: openjdk10
      env: TNT_REPO="2.0"
    - jdk: openjdk11
      env: TNT_REPO="2.0"
    - jdk: openjdk11
      env: TNT_REPO="2x" COVER_REPORT="yes"

before_script:
  - src/test/travis.pre.sh

script:
  - |
    if [ "${COVER_REPORT}" = "yes" ]; then
        mvn verify jacoco:report
    else
        mvn verify
    fi
  - head -n -0 testroot/*.log

after_success:
  - |
    if [ "${COVER_REPORT}" = "yes" ]; then
        mvn coveralls:report -DrepoToken=${COVERALLS_TOKEN}
    fi
